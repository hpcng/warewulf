#!ipxe

set uri http://{{.Ipaddr}}:{{.Port}}/provision/{{.Hwaddr}}?assetkey=${asset}&uuid=${uuid}

kernel --name kernel ${uri}&stage=kernel
initrd --name initramfs ${uri}&stage=initramfs
boot kernel initrd=initramfs rd.neednet=1 {{ range $devname, $netdev := .NetDevs }}{{if and $netdev.Hwaddr $netdev.Device}} ifname={{$netdev.Device}}:{{$netdev.Hwaddr}} {{end}}{{end}} root=wwinit wwinit.image=${uri}&stage=container&compress=gz wwinit.system=${uri}&stage=system&compress=gz wwinit.runtime=${uri}&stage=runtime&compress=gz debug wwid={{.Hwaddr}} {{.KernelArgs}} init=/init
